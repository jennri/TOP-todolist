(()=>{const t=document.querySelector("[data-list]"),e=document.querySelector("[data-new-list]"),n=document.querySelector("[data-new-input]"),a=document.querySelector("[delete-list-btn]"),l=document.querySelector("[data-list-display-container]"),o=document.querySelector("[data-list-title]"),i=document.querySelector("[data-list-count]"),r=document.querySelector("[data-tasks]"),s=document.querySelector("[task-template]"),c=document.querySelector("[data-new-task-form]"),d=document.querySelector("[data-new-task-input]"),u="task.lists";let m=JSON.parse(localStorage.getItem(u))||[];const p="task.selectedListID";let S=localStorage.getItem(p);function f(){localStorage.setItem(u,JSON.stringify(m)),localStorage.setItem(p,S),y()}function y(){k(t),m.forEach((e=>{const n=document.createElement("li");n.dataset.listId=e.id,n.classList.add("listname"),n.innerText=e.name,e.id===S&&n.classList.add("active"),t.appendChild(n)}));const e=m.find((t=>t.id===S));null==S?l.style.display="none":(l.style.display="",o.innerText=e.name,function(t){const e=t.task.filter((t=>!t.complete)).length,n=1===e?"task":"tasks";i.innerText=`${e} ${n} remaining`}(e),k(r),function(t){t.task.forEach((t=>{const e=document.importNode(s.content,!0),n=e.querySelector("input");n.id=t.id,n.checked=t.complete;const a=e.querySelector("label");a.htmlFor=t.id,a.append(t.name),r.appendChild(e)}))}(e))}function k(t){for(;t.firstChild;)t.removeChild(t.firstChild)}y(),t.addEventListener("click",(t=>{"li"===t.target.tagName.toLowerCase()&&(S=t.target.dataset.listId,f())})),a.addEventListener("click",(()=>{m=m.filter((t=>t.id!==S)),S=null,f()})),e.addEventListener("submit",(t=>{t.preventDefault();const e=n.value;if(null==e||""===e)return;const a=(l=e,{id:Date.now().toString(),name:l,task:[]});var l;n.value=null,m.push(a),f()})),c.addEventListener("submit",(t=>{t.preventDefault();const e=d.value;if(null==e||""===e)return;const n=(a=e,{id:Date.now().toString(),name:a,complete:!1});var a;d.value=null,m.find((t=>t.id===S)).task.push(n),f()}))})();